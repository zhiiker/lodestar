
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Lodestar documentation - Typescript Eth2.0 client" name="description"/>
<link href="https://chainsafe.github.io/lodestar/packages/validator/" rel="canonical"/>
<link href="../../images/favicon.ico" rel="icon"/>
<meta content="mkdocs-1.1.2, mkdocs-material-7.1.4" name="generator"/>
<title>Index - Lodestar documentation</title>
<link href="../../assets/stylesheets/main.bde7dde4.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.ef6f36e2.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
<link href="../../stylesheets/extras.css" rel="stylesheet"/>
</head>
<body data-md-color-accent="black" data-md-color-primary="" data-md-color-scheme="preference" dir="ltr">
<script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#event-iterator">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Lodestar documentation" class="md-header__button md-logo" data-md-component="logo" href="../.." title="Lodestar documentation">
<img alt="logo" src="../../assets/300ppi/short-LS-hookS-WHITE.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Lodestar documentation
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Index
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" data-md-state="active" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</label>
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/chainsafe/lodestar/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    chainsafe/lodestar
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Lodestar documentation" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="Lodestar documentation">
<img alt="logo" src="../../assets/300ppi/short-LS-hookS-WHITE.png"/>
</a>
    Lodestar documentation
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/chainsafe/lodestar/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    chainsafe/lodestar
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
        Getting started
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../installation/">
        Installation
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3">
        Design
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Design" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          Design
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../design/architecture/">
        Beacon node architecture
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../design/events/">
        Beacon node events
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../design/depgraph/">
        Lodestar package structure
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4">
        Usage
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Usage" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          Usage
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../usage/testnet/">
        Mainnet or public testnet
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../usage/local/">
        Local testnet
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../usage/key-management/">
        Key management
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../usage/prometheus-grafana/">
        Prometheus &amp; Grafana Setup
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5">
        Reference
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Reference" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
          Reference
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/cli/">
        Command line
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../">
        Packages
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../contributing/">
        Contributing
      </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/chainsafe/lodestar/edit/master/docs/packages/validator/README.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"></path></svg>
</a>
<p><a href="./">event-iterator</a> › <a href="globals/">Globals</a></p>
<h1 id="event-iterator">event-iterator<a class="headerlink" href="#event-iterator" title="Permanent link">¶</a></h1>
<h1 id="eventiterator-convert-any-js-event-emitter-to-async-iterators">EventIterator: convert any JS event emitter to async iterators<a class="headerlink" href="#eventiterator-convert-any-js-event-emitter-to-async-iterators" title="Permanent link">¶</a></h1>
<h2 id="highlights">Highlights<a class="headerlink" href="#highlights" title="Permanent link">¶</a></h2>
<p><code>EventIterator</code> is a small module that greatly simplifies converting event
emitters, event targets, and similar objects into EcmaScript async iterators. It
works in browser and Node.js environments.</p>
<p>As a bonus you get utility functions:</p>
<ul>
<li><code>subscribe</code> to subscribe to events on a DOM event target with an async iterator</li>
<li><code>stream</code> to consume data from a Node.js readable stream as an async iterator</li>
</ul>
<h2 id="basic-examples">Basic examples<a class="headerlink" href="#basic-examples" title="Permanent link">¶</a></h2>
<p>For client-side browser events:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="s2">"core-js/es7/symbol"</span> <span class="cm">/* If necessary */</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">subscribe</span><span class="p">}</span> <span class="k">from</span> <span class="s2">"event-iterator"</span>
<span class="kd">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">"a.example"</span><span class="p">)</span>

<span class="k">for</span> <span class="k">await</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">click</span> <span class="k">of</span> <span class="nx">subscribe</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="s2">"click"</span><span class="p">))</span> <span class="p">{</span>
  <span class="cm">/* Asynchronously iterate over click events on the element. */</span>
<span class="p">}</span>
</code></pre></div>
<p>For server-side Node.js events:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="s2">"core-js/es7/symbol"</span> <span class="cm">/* If necessary */</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">stream</span><span class="p">}</span> <span class="k">from</span> <span class="s2">"event-iterator"</span>
<span class="kd">const</span> <span class="nx">file</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"fs"</span><span class="p">).</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s2">"example-file"</span><span class="p">)</span>

<span class="k">for</span> <span class="k">await</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">chunk</span> <span class="k">of</span> <span class="nx">stream</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">file</span><span class="p">))</span> <span class="p">{</span>
  <span class="cm">/* Asynchronously iterate over buffer chunks read from file. */</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="advanced-examples">Advanced examples<a class="headerlink" href="#advanced-examples" title="Permanent link">¶</a></h2>
<p>Let's look at how <code>subscribe()</code> and <code>stream()</code> are implemented.</p>
<p>For client-side browser events:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="s2">"core-js/es7/symbol"</span> <span class="cm">/* If necessary */</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">EventIterator</span><span class="p">}</span> <span class="k">from</span> <span class="s2">"event-iterator"</span>

<span class="k">export</span> <span class="kd">function</span> <span class="nx">subscribe</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
  <span class="cm">/* "this" refers to a DOM event target. */</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nx">EventIterator</span><span class="p">(</span>
    <span class="p">({</span><span class="nx">push</span><span class="p">})</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">push</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
      <span class="k">return</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">push</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>For server-side Node.js events:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="s2">"core-js/es7/symbol"</span> <span class="cm">/* If necessary */</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">EventIterator</span><span class="p">}</span> <span class="k">from</span> <span class="s2">"event-iterator"</span>

<span class="k">export</span> <span class="kd">function</span> <span class="nx">stream</span><span class="p">()</span> <span class="p">{</span>
  <span class="cm">/* "this" refers to a Node.js readable stream. */</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nx">EventIterator</span><span class="p">(</span>
    <span class="nx">queue</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="s2">"data"</span><span class="p">,</span> <span class="nx">queue</span><span class="p">.</span><span class="nx">push</span><span class="p">)</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="s2">"close"</span><span class="p">,</span> <span class="nx">queue</span><span class="p">.</span><span class="nx">stop</span><span class="p">)</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="s2">"error"</span><span class="p">,</span> <span class="nx">queue</span><span class="p">.</span><span class="nx">fail</span><span class="p">)</span>

      <span class="nx">queue</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">"highWater"</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">pause</span><span class="p">())</span>
      <span class="nx">queue</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">"lowWater"</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">resume</span><span class="p">())</span>

      <span class="k">return</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">removeListener</span><span class="p">(</span><span class="s2">"data"</span><span class="p">,</span> <span class="nx">queue</span><span class="p">.</span><span class="nx">push</span><span class="p">)</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">removeListener</span><span class="p">(</span><span class="s2">"close"</span><span class="p">,</span> <span class="nx">queue</span><span class="p">.</span><span class="nx">stop</span><span class="p">)</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">removeListener</span><span class="p">(</span><span class="s2">"error"</span><span class="p">,</span> <span class="nx">queue</span><span class="p">.</span><span class="nx">fail</span><span class="p">)</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">destroy</span><span class="p">()</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="backpressure">Backpressure<a class="headerlink" href="#backpressure" title="Permanent link">¶</a></h3>
<p>If you cannot reasonably consume all emitted events with your async iterator;
the internal <code>EventIterator</code> queue can fill up indefinitely.</p>
<p>A warning will be emitted when the queue reaches the high water mark (100 items
by default).</p>
<p>However, if you are able to control the event stream then you can listen to the
<code>highWater</code>, and <code>lowWater</code> events to exert backpressure.</p>
<p>When these events are emitted can be changed or disabled by setting
<code>highWaterMark</code> and <code>lowWaterMark</code> in the options of the <code>EventIterator</code>
constructor.</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span><span class="nx">EventIterator</span><span class="p">}</span> <span class="k">from</span> <span class="s2">"event-iterator"</span>

<span class="kd">const</span> <span class="nx">eventIterator</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">EventIterator</span><span class="p">(</span>
  <span class="p">({</span><span class="nx">push</span><span class="p">,</span> <span class="nx">on</span><span class="p">})</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">file</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"fs"</span><span class="p">).</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s2">"example-file"</span><span class="p">)</span>
    <span class="nx">file</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">"data"</span><span class="p">,</span> <span class="nx">push</span><span class="p">)</span>
    <span class="nx">on</span><span class="p">(</span><span class="s2">"highWater"</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nx">file</span><span class="p">.</span><span class="nx">pause</span><span class="p">())</span>
    <span class="nx">on</span><span class="p">(</span><span class="s2">"lowWater"</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nx">file</span><span class="p">.</span><span class="nx">resume</span><span class="p">())</span>
    <span class="k">return</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nx">file</span><span class="p">.</span><span class="nx">removeListener</span><span class="p">(</span><span class="s2">"data"</span><span class="p">,</span> <span class="nx">push</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="p">{</span><span class="nx">highWaterMark</span><span class="o">:</span> <span class="mf">10</span><span class="p">,</span> <span class="nx">lowWaterMark</span><span class="o">:</span> <span class="mf">5</span><span class="p">}</span>
<span class="p">)</span>
</code></pre></div>
<h2 id="api-specification">API specification<a class="headerlink" href="#api-specification" title="Permanent link">¶</a></h2>
<p>Create a new event iterator with <code>new EventIterator(listen)</code>. This
object implements the async iterator protocol by having a <code>Symbol.asyncIterator</code>
property.</p>
<p>Note: you must set up any <code>Symbol.asyncIterator</code> polyfills <strong>before</strong> importing
<code>EventIterator</code>.</p>
<p>The <code>listen</code> handler is called every time a new iterator is created to set up
your event listeners. The optional <code>remove</code> handler is called when the event
listeners need to be removed. The <code>listen</code> handler returns the <code>remove</code>
handler, making it easy to call <code>addListener</code>/<code>removeListener</code> or similar
functions.</p>
<p>Type definitions:</p>
<div class="highlight"><pre><span></span><code><span class="k">export</span> <span class="kd">interface</span> <span class="nx">Queue</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="nx">push</span><span class="p">(</span><span class="nx">value</span>: <span class="kt">T</span><span class="p">)</span><span class="o">:</span> <span class="k">void</span>
  <span class="nx">stop</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span>
  <span class="nx">fail</span><span class="p">(</span><span class="nx">error</span>: <span class="kt">Error</span><span class="p">)</span><span class="o">:</span> <span class="k">void</span>
  <span class="nx">on</span><span class="p">(</span><span class="nx">event</span><span class="o">:</span> <span class="s2">"highWater"</span> <span class="o">|</span> <span class="s2">"lowWater"</span><span class="p">,</span> <span class="nx">fn</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kd">type</span> <span class="nx">RemoveHandler</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">void</span>
<span class="k">export</span> <span class="kd">type</span> <span class="nx">ListenHandler</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">(</span><span class="nx">queue</span>: <span class="kt">Queue</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">void</span> <span class="o">|</span> <span class="nx">RemoveHandler</span>

<span class="cm">/* High water mark defaults to 100. Set to undefined to disable warnings. */</span>
<span class="kd">interface</span> <span class="nx">EventIteratorOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">highWaterMark?</span>: <span class="kt">number</span><span class="p">,</span>
  <span class="nx">lowWaterMark?</span>: <span class="kt">number</span><span class="p">,</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nx">EventIterator</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kr">constructor</span><span class="p">(</span><span class="nx">ListenHandler</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">,</span> <span class="nx">options?</span>: <span class="kt">EventIteratorOptions</span><span class="p">)</span>

    <span class="p">[</span><span class="nb">Symbol</span><span class="p">.</span><span class="nx">asyncIterator</span><span class="p">]()</span><span class="o">:</span> <span class="nx">AsyncIterator</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="background">Background<a class="headerlink" href="#background" title="Permanent link">¶</a></h2>
<p>The <code>EventIterator</code> class is an adapter to transform any browser or Node.js
event emitter into an async iterator that iterates over events.</p>
<p>Imagine you have a bunch of text files and in Node.js and you want to decide
whether they are longer or shorter than a certain number of lines. The files
should not be binary to avoid cluttering the results. To be more specific, we
want a function that will:</p>
<ul>
<li>return <code>true</code> if the number of lines is 1000 or greater</li>
<li>return <code>false</code> if the number of lines is less than 1000</li>
<li>throw an exception if the file appears to be binary (contains NULL bytes)</li>
<li>returns as quickly as possible</li>
<li>conserves memory by not reading entire files at once</li>
</ul>
<p>A naive solution would look like this:</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span> <span class="nx">countLines</span><span class="p">(</span><span class="nx">buffer</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">str</span> <span class="o">=</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">str</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="s2">"\0"</span><span class="p">))</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">"Binary file!"</span><span class="p">)</span>
  <span class="k">return</span> <span class="p">(</span><span class="nx">str</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\n/g</span><span class="p">)</span> <span class="o">||</span> <span class="p">[]).</span><span class="nx">length</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">isLongTextFile</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">lines</span> <span class="o">=</span> <span class="mf">1</span>

  <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">file</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">"data"</span><span class="p">,</span> <span class="nx">chunk</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="nx">lines</span> <span class="o">+=</span> <span class="nx">countLines</span><span class="p">(</span><span class="nx">chunk</span><span class="p">)</span>
    <span class="p">})</span>

    <span class="nx">file</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">"end"</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="nx">resolve</span><span class="p">(</span><span class="nx">lines</span> <span class="o">&gt;=</span> <span class="mf">1000</span><span class="p">)</span>
    <span class="p">})</span>

    <span class="nx">file</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">"error"</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
    <span class="p">})</span>
  <span class="p">})</span>
<span class="p">}</span>

<span class="nx">isLongTextFile</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s2">"..."</span><span class="p">)).</span><span class="nx">then</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">)</span>
</code></pre></div>
<p>Unfortunately, this solution has some problems:</p>
<ul>
<li>the entire file is read even if the file is way longer than 1000 lines</li>
<li>the entire file is read even if an exception occurs (a NULL byte was found)</li>
<li>multiple exceptions can be thrown if NULL bytes are found in multiple chunks</li>
</ul>
<p>So we improve our solution, and we arrive at something like this:</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span> <span class="nx">isLongTextFile</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">lines</span> <span class="o">=</span> <span class="mf">1</span>

  <span class="kd">const</span> <span class="nx">isLong</span> <span class="o">=</span> <span class="nx">n</span> <span class="p">=&gt;</span> <span class="nx">n</span> <span class="o">&gt;=</span> <span class="mf">1000</span>

  <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">file</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">"data"</span><span class="p">,</span> <span class="nx">chunk</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="nx">lines</span> <span class="o">+=</span> <span class="nx">countLines</span><span class="p">(</span><span class="nx">chunk</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">isLong</span><span class="p">(</span><span class="nx">lines</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">file</span><span class="p">.</span><span class="nx">close</span><span class="p">()</span>
          <span class="nx">resolve</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">file</span><span class="p">.</span><span class="nx">destroy</span><span class="p">()</span>
        <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">})</span>

    <span class="nx">file</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">"end"</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="nx">resolve</span><span class="p">(</span><span class="nx">isLong</span><span class="p">(</span><span class="nx">lines</span><span class="p">))</span>
    <span class="p">})</span>

    <span class="nx">file</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">"error"</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
    <span class="p">})</span>
  <span class="p">})</span>
<span class="p">}</span>

<span class="nx">isLongTextFile</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s2">"..."</span><span class="p">)).</span><span class="nx">then</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">)</span>
</code></pre></div>
<p>This works and we're happy to have solved the problem!</p>
<p>But what if there were a nicer way to do this? Async iterators sure seem like a
nice fit for this problem. They are a stage 3 EcmaScript proposal and can be
used by using TypeScript or Babel.</p>
<p>A similar solution using async iterators could look like this:</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span> <span class="k">async</span> <span class="nx">isLongTextFile</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">lines</span> <span class="o">=</span> <span class="mf">1</span>
  <span class="k">for</span> <span class="k">await</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">chunk</span> <span class="k">of</span> <span class="nx">stream</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">file</span><span class="p">))</span> <span class="p">{</span> <span class="c1">// or file::stream()</span>
    <span class="nx">lines</span> <span class="o">+=</span> <span class="nx">countLines</span><span class="p">(</span><span class="nx">chunk</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">lines</span> <span class="o">&gt;</span> <span class="mf">1000</span><span class="p">)</span> <span class="k">return</span> <span class="kc">true</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="kc">false</span>
<span class="p">}</span>

<span class="nx">isLongTextFile</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s2">"..."</span><span class="p">)).</span><span class="nx">then</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">)</span>
</code></pre></div>
<p>The question is: how do you create an async iterator from a readable stream?
Conceptually they are very similar; they both:</p>
<ul>
<li>can signal that a next value is available</li>
<li>can signal when the end has been reached</li>
<li>can emit an error, after which no new values will become available</li>
</ul>
<p>Async iterators have a few additional advantages that translate in simpler code:</p>
<ul>
<li>early returns and exceptions will stop the iterator and release resources</li>
<li>exceptions in the iterator and in calling code can be handled without additional boilerplate</li>
</ul>
<p>So how do you transform a readble stream into an async iterator? With an <code>EventIterator</code>.</p>
<p>We can define the <code>stream</code> function above as:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span><span class="nx">EventIterator</span><span class="p">}</span> <span class="k">from</span> <span class="s2">"event-iterator"</span>

<span class="kd">function</span> <span class="nx">stream</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nx">EventIterator</span><span class="p">(</span>
    <span class="p">({</span> <span class="nx">push</span><span class="p">,</span> <span class="nx">stop</span><span class="p">,</span> <span class="nx">fail</span> <span class="p">})</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="s2">"data"</span><span class="p">,</span> <span class="nx">push</span><span class="p">)</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="s2">"end"</span><span class="p">,</span> <span class="nx">stop</span><span class="p">)</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="s2">"error"</span><span class="p">,</span> <span class="nx">fail</span><span class="p">)</span>

      <span class="k">return</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">removeListener</span><span class="p">(</span><span class="s2">"data"</span><span class="p">,</span> <span class="nx">push</span><span class="p">)</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">removeListener</span><span class="p">(</span><span class="s2">"end"</span><span class="p">,</span> <span class="nx">stop</span><span class="p">)</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">removeListener</span><span class="p">(</span><span class="s2">"error"</span><span class="p">,</span> <span class="nx">fail</span><span class="p">)</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">destroy</span><span class="p">()</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>The <code>EventIterator</code> takes care of:</p>
<ul>
<li>conforming to the async iterator spec</li>
<li>returning placeholder promises to the async iterator if no value is available</li>
<li>queueing values when more data is ready than consumed by the iterator</li>
<li>installing callbacks to release resources so you can remove any listener handlers or do other cleanup</li>
</ul>
<p>Why create an abstract <code>EventIterator</code> that requires you to define your own
integration code? Several reasons:</p>
<ul>
<li>the event emitters as defined by Node.js have a different API than the event targets as defined in the DOM</li>
<li>the events that you are interested in may have different names depending on your use case</li>
<li>you may want to specify custom behaviour when the iterator throws or returns early</li>
</ul>
<h2 id="licensed-under-mit-license">Licensed under MIT license<a class="headerlink" href="#licensed-under-mit-license" title="Permanent link">¶</a></h2>
<p>Copyright (c) 2017-2020 Rolf Timmermans</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</p>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs
        </a>
</div>
<div class="md-footer-social">
<a class="md-footer-social__link" href="https://github.com/ChainSafe/lodestar" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 480 512" xmlns="http://www.w3.org/2000/svg"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></svg>
</a>
<a class="md-footer-social__link" href="https://twitter.com/ChainSafe" rel="noopener" target="_blank" title="twitter.com">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg>
</a>
<a class="md-footer-social__link" href="https://discord.gg/yjyvFRP" rel="noopener" target="_blank" title="discord.gg">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M297.216 243.2c0 15.616-11.52 28.416-26.112 28.416-14.336 0-26.112-12.8-26.112-28.416s11.52-28.416 26.112-28.416c14.592 0 26.112 12.8 26.112 28.416zm-119.552-28.416c-14.592 0-26.112 12.8-26.112 28.416s11.776 28.416 26.112 28.416c14.592 0 26.112-12.8 26.112-28.416.256-15.616-11.52-28.416-26.112-28.416zM448 52.736V512c-64.494-56.994-43.868-38.128-118.784-107.776l13.568 47.36H52.48C23.552 451.584 0 428.032 0 398.848V52.736C0 23.552 23.552 0 52.48 0h343.04C424.448 0 448 23.552 448 52.736zm-72.96 242.688c0-82.432-36.864-149.248-36.864-149.248-36.864-27.648-71.936-26.88-71.936-26.88l-3.584 4.096c43.52 13.312 63.744 32.512 63.744 32.512-60.811-33.329-132.244-33.335-191.232-7.424-9.472 4.352-15.104 7.424-15.104 7.424s21.248-20.224 67.328-33.536l-2.56-3.072s-35.072-.768-71.936 26.88c0 0-36.864 66.816-36.864 149.248 0 0 21.504 37.12 78.08 38.912 0 0 9.472-11.52 17.152-21.248-32.512-9.728-44.8-30.208-44.8-30.208 3.766 2.636 9.976 6.053 10.496 6.4 43.21 24.198 104.588 32.126 159.744 8.96 8.96-3.328 18.944-8.192 29.44-15.104 0 0-12.8 20.992-46.336 30.464 7.68 9.728 16.896 20.736 16.896 20.736 56.576-1.792 78.336-38.912 78.336-38.912z"></path></svg>
</a>
<a class="md-footer-social__link" href="https://medium.com/ChainSafe" rel="noopener" target="_blank" title="medium.com">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M0 32v448h448V32H0zm372.2 106.1-24 23c-2.1 1.6-3.1 4.2-2.7 6.7v169.3c-.4 2.6.6 5.2 2.7 6.7l23.5 23v5.1h-118V367l24.3-23.6c2.4-2.4 2.4-3.1 2.4-6.7V199.8l-67.6 171.6h-9.1L125 199.8v115c-.7 4.8 1 9.7 4.4 13.2l31.6 38.3v5.1H71.2v-5.1l31.6-38.3c3.4-3.5 4.9-8.4 4.1-13.2v-133c.4-3.7-1-7.3-3.8-9.8L75 138.1V133h87.3l67.4 148L289 133.1h83.2v5z"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../assets/javascripts/workers/search.4fa0e4ee.min.js", "version": null}</script>
<script src="../../assets/javascripts/bundle.1d3bfcf1.min.js"></script>
</body>
</html>